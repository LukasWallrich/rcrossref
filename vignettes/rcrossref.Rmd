---
title: rcrossref introduction 
author: Scott Chamberlain
date: "2021-08-02"
output: rmarkdown::html_vignette
vignette: >
    %\VignetteIndexEntry{rcrossref introduction}
    %\VignetteEngine{knitr::rmarkdown}
    %\VignetteEncoding{UTF-8}
---



## Installation

Install stable version from CRAN


```r
install.packages("rcrossref")
```

Or development version from GitHub


```r
remotes::install_github("ropensci/rcrossref")
```


```r
library("rcrossref")
```

## Citation search

CrossRef's DOI Content Negotiation service, where you can citations back in various formats, including `apa`


```r
cr_cn(dois = "10.1371/journal.pone.0112608", format = "text", style = "apa")
#> Error in cr_GET(endpoint = sprintf("works/%s/agency", x), args = list(), : res$response_headers$`content-type` == "application/json;charset=UTF-8" ist nicht TRUE
```

There are a lot more styles. We include a dataset as a character vector within the package, accessible via the `get_styles()` function, e.g.,


```r
get_styles()[1:5]
#> [1] "academy-of-management-review"        
#> [2] "accident-analysis-and-prevention"    
#> [3] "aci-materials-journal"               
#> [4] "acm-sig-proceedings-long-author-list"
#> [5] "acm-sig-proceedings"
```

`bibtex`


```r
cat(cr_cn(dois = "10.1126/science.169.3946.635", format = "bibtex"))
#> Error in cr_GET(endpoint = sprintf("works/%s/agency", x), args = list(), : res$response_headers$`content-type` == "application/json;charset=UTF-8" ist nicht TRUE
```

`bibentry`


```r
cr_cn(dois = "10.6084/m9.figshare.97218", format = "bibentry")
#> Error in cr_GET(endpoint = sprintf("works/%s/agency", x), args = list(), : res$response_headers$`content-type` == "application/json;charset=UTF-8" ist nicht TRUE
```

## Citation count

Citation count, using OpenURL


```r
cr_citation_count(doi="10.1371/journal.pone.0042793")
#>                            doi count
#> 1 10.1371/journal.pone.0042793    43
```

## Search Crossref metadata API

The following functions all use the CrossRef API.

### Look up funder information


```r
cr_funders(query="NSF")
#> Error in cr_GET(path, args, todf = FALSE, ...): res$response_headers$`content-type` == "application/json;charset=UTF-8" ist nicht TRUE
```

### Check the DOI minting agency


```r
cr_agency(dois = '10.13039/100000001')
#> Error in cr_GET(endpoint = sprintf("works/%s/agency", x), args = list(), : res$response_headers$`content-type` == "application/json;charset=UTF-8" ist nicht TRUE
```

### Search works (i.e., articles, books, etc.)


```r
cr_works(filter=c(has_orcid=TRUE, from_pub_date='2004-04-04'), limit=1)
#> Error in cr_GET(endpoint = path, args, todf = FALSE, ...): res$response_headers$`content-type` == "application/json;charset=UTF-8" ist nicht TRUE
```

### Search journals


```r
cr_journals(issn=c('1803-2427','2326-4225'))
#> Error in cr_GET(endpoint = path, args, todf = FALSE, parse = TRUE, ...): res$response_headers$`content-type` == "application/json;charset=UTF-8" ist nicht TRUE
```

### Search license information


```r
cr_licenses(query = 'elsevier')
#> Error in cr_GET("licenses", args, todf = FALSE, on_error = stop, parse = parse, : res$response_headers$`content-type` == "application/json;charset=UTF-8" ist nicht TRUE
```

### Search based on DOI prefixes


```r
cr_prefixes(prefixes=c('10.1016','10.1371','10.1023','10.4176','10.1093'))
#> Error in cr_GET(path, args, todf = FALSE, ...): res$response_headers$`content-type` == "application/json;charset=UTF-8" ist nicht TRUE
```

### Search CrossRef members


```r
cr_members(query='ecology', limit = 5)
#> Error in cr_GET(endpoint = path, args, FALSE, parse = TRUE, ...): res$response_headers$`content-type` == "application/json;charset=UTF-8" ist nicht TRUE
```

### Get N random DOIs

`cr_r()` uses the function `cr_works()` internally.


```r
cr_r()
#> Error in cr_GET(endpoint = path, args, todf = FALSE, ...): res$response_headers$`content-type` == "application/json;charset=UTF-8" ist nicht TRUE
```

You can pass in the number of DOIs you want back (default is 10)


```r
cr_r(2)
#> Error in cr_GET(endpoint = path, args, todf = FALSE, ...): res$response_headers$`content-type` == "application/json;charset=UTF-8" ist nicht TRUE
```

## Get full text

Publishers can optionally provide links in the metadata they provide to Crossref for full text of the work, but that data is often missing. Find out more about it at https://support.crossref.org/hc/en-us/articles/215750183-Crossref-Text-and-Data-Mining-Services

Get some DOIs for articles that provide full text, and that have `CC-BY 3.0` licenses (i.e., more likely to actually be open)


```r
out <-
  cr_works(filter = list(has_full_text = TRUE,
    license_url = "http://creativecommons.org/licenses/by/3.0/"))
#> Error in cr_GET(endpoint = path, args, todf = FALSE, ...): res$response_headers$`content-type` == "application/json;charset=UTF-8" ist nicht TRUE
(dois <- out$data$doi)
#> Error in eval(expr, envir, enclos): Objekt 'out' nicht gefunden
```

From the output of `cr_works` we can get full text links if we know where to look:


```r
do.call("rbind", out$data$link)
#> Error in do.call("rbind", out$data$link): Objekt 'out' nicht gefunden
```

From there, you can grab your full text, but because most links require
authentication, enter another package: `crminer`.

You'll need package `crminer` for the rest of the work.

Onc we have DOIs, get URLs to full text content


```r
if (!requireNamespace("crminer")) {
  install.packages("crminer")
}
```


```r
library(crminer)
#> Error in library(crminer): es gibt kein Paket namens 'crminer'
(links <- crm_links("10.1155/2014/128505"))
#> Error in crm_links("10.1155/2014/128505"): konnte Funktion "crm_links" nicht finden
```

Then use those URLs to get full text


```r
crm_pdf(links)
#> <document>/Users/sckott/Library/Caches/R/crminer/128505.pdf
#>   Pages: 1
#>   No. characters: 1565
#>   Created: 2014-09-15
```

See also fulltext (https://github.com/ropensci/fulltext) for getting scholarly text 
for text mining.
